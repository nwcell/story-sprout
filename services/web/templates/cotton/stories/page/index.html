<div id="page-{{ page.uuid }}" class="bg-white shadow overflow-hidden sm:rounded-md border border-light-gray">
  <div class="px-6 py-4 border-b border-light-gray flex justify-between items-center">
    <h3 class="text-lg font-medium text-black">Page {{ page.order|add:"1" }}</h3>
    <div class="flex space-x-2">
      <c-stories.page.move-page-buttons :story=story :page=page />

      <c-button.delete id="delete-page-buttons-{{ page.uuid }}"
                  hx-delete="{% url 'api-1:delete_page' story_uuid=story.uuid page_uuid=page.uuid %}"
                  hx-target="#page-{{ page.uuid }}"
                  hx-swap="outerHTML"
                  hx-trigger="click" />
    </div>
  </div>
  <div class="px-6 py-4 relative">
    <div class="flex flex-col lg:flex-row lg:space-x-6">
      <div class="flex-1">
        <h4 class="font-medium text-black mb-1">Content</h4>
        <c-htmx.sse hx-get="{% url 'api-1:get_page_content' story_uuid=story.uuid page_uuid=page.uuid %}" event="get_page_content" key="{{ page.uuid }}" />
        <c-stories.page.content :story=story :page=page />
        <c-ai.chip name="ai-chip"
                   type="button"
                   emoji="✍️"
                   color="purple"
                   hx-post="{% url 'api-1:ai_page_content' %}"
                   hx-ext='json-enc'
                   hx-vals='{"page_uuid": "{{ page.uuid }}"}'>Suggest</c-ai.chip>

        <h4 class="font-medium text-black mb-1">Image Description</h4>
        <c-htmx.sse hx-get="{% url 'api-1:get_page_image_text' story_uuid=story.uuid page_uuid=page.uuid %}" event="get_page_image_text" key="{{ page.uuid }}" />
        <c-stories.page.image_text :story=story :page=page />

        <c-ai.chip name="ai-chip"
                   type="button"
                   emoji="✍️"
                   color="purple"
                   hx-post="{% url 'api-1:ai_page_image_text' %}"
                   hx-ext='json-enc'
                   hx-vals='{"page_uuid": "{{ page.uuid }}"}'>Suggest</c-ai.chip>
      </div>

      <div class="lg:w-1/3 mt-4 lg:mt-0">
        <c-htmx.sse hx-get="{% url 'api-1:get_page_image' story_uuid=story.uuid page_uuid=page.uuid %}" event="get_page_image" key="{{ page.uuid }}" />
        <c-fields.image :image=page.image
                        upload_url="{% url 'api-1:upload_page_image' story_uuid=story.uuid page_uuid=page.uuid %}"
                        delete_url="{% url 'api-1:delete_page_image' story_uuid=story.uuid page_uuid=page.uuid %}" />
        <c-ai.chip name="ai-chip"
                   type="button"
                   emoji="✨"
                   color="purple"
                   hx-post="{% url 'api-1:ai_page_image_generate' %}"
                   hx-ext='json-enc'
                   hx-vals='{"page_uuid": "{{ page.uuid }}"}'>Generate Image</c-ai.chip>
      </div>
    </div>

    <div class="mt-4 text-right text-sm text-gray">
    </div>
  </div>
</div>
